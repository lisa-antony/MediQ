<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediQ | Dashboard</title>
    <link rel="stylesheet" href="style2.css">
</head>

<body>

<!-- NAVBAR -->
<header class="navbar">
    <h1>MediQ</h1>
    <nav>
        <a href="dashboard.html">Dashboard</a>
        <a href="login.html">Profile</a>
        <a href="#" onclick="logout()">Logout</a>
    </nav>
</header>


<!-- MAIN CONTENT -->
<main class="container">

    <!-- Welcome Section -->
    <section>
        <h1>Welcome to MediQ</h1>
        <p>
            MediQ helps you manage appointments, check doctor availability, and experience
            healthcare without waiting in queues.
        </p>

    </section>


    <!-- FEATURES SECTION -->
    <section class="card-container">

        <div class="card">
            <h2>Book Appointment</h2>
            <p>
                Schedule appointments instantly with top doctors.
            </p>
            <a href="create booking.html">
            <button onclick="bookAppointment()"></a>
                Book Appointment
            </button>
        </div>


        <div class="card">
            <h2>Check Status</h2>
            <p>
                View your appointment details and queue status.
            </p>
            <a href="update slots.html"
            <onclick onclick="viewStatus()"></onclick></a>
                View Status
            </button>
        </div>


        <div class="card">
            <h2>Available Doctors</h2>
            <p>
                Browse doctors and their available time slots.
            </p>
            <button onclick="checkDoctors()">
                View Doctors
            </button>
        </div>

    </section>


    <!-- RESULT DISPLAY -->
    <section>
        <p id="result"></p>
    </section>




</main>


<!-- FOOTER -->
<footer class="footer">
    <p>Â© 2026 MediQ | Smart Healthcare Appointment System</p>
</footer>



<!-- JAVASCRIPT -->
<script>

/* Utility function to show messages */
function showMessage(message, isError=false){

    const result = document.getElementById("result");

    result.innerText = message;

    result.style.color = isError ? "red" : "#0077b6";
}


/* Book appointment */
async function bookAppointment(){

    showMessage("Booking appointment...");

    try {

        const response = window.location.href="create%20booking.html?doctorId=123&slot=10AM-11AM";
        if(!response.ok)
            throw new Error();

        const data = await response.text();

        showMessage(data);

    }
    catch{

        showMessage("Unable to connect to server.", true);

    }
}


/* View appointment status */
async function viewStatus(){

    showMessage("Fetching status...");

    try {

        const response = await fetch("http://localhost:8080/status");

        if(!response.ok)
            throw new Error();

        const data = await response.text();

        showMessage(data);

    }
    catch{

        showMessage("Unable to fetch appointment status.", true);

    }
}


/* Check doctors */
async function checkDoctors(){

    showMessage("Loading doctor list...");

    try {

        const response = await fetch("http://localhost:8080/doctors");

        if(!response.ok)
            throw new Error();

        const doctors = await response.json();

        let output = "";

        doctors.forEach(doc => {
         output += `${doc.name} - ${doc.specialty} (${doc.available ?       "Available" : "Not Available"})\n`;
});

showMessage(output);

    }
    catch{

        showMessage("Unable to fetch doctor availability.", true);

    }
}


/* Logout */
function logout(){

    if(confirm("Are you sure you want to logout?")){

        window.location.href = "login.html";

    }

}

</script>

</body>
</html>